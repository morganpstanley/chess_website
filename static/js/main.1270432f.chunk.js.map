{"version":3,"sources":["reducer.js","images/lightning.svg","Header/Header.js","images/chess-logo.svg","images/open-book.svg","images/chess-gear.svg","Options/Options.js","images/strategy.svg","InfoBox/InfoBox.js","EvaluationBar/EvaluationBar.js","images/pieces/wP.svg","images/pieces/wB.svg","images/pieces/wN.svg","images/pieces/wR.svg","images/pieces/wQ.svg","images/pieces/bP.svg","images/pieces/bB.svg","images/pieces/bN.svg","images/pieces/bR.svg","images/pieces/bQ.svg","CaptureArea/CaptureArea.js","PromotionPrompt/PromotionPrompt.js","helpers.js","Chessboard/ChessBoard.js","Dashboard/Dashboard.js","App/App.js","reportWebVitals.js","index.js"],"names":["initialState","game","Chess","fen","pgn","depth","computerOpponent","difficulty","userColor","Header","id","src","lightningBolt","alt","Options","dispatch","useDispatch","handleChange","event","target","name","value","JSON","parse","type","payload","className","onChange","defaultChecked","htmlFor","InfoBox","chess","useSelector","state","useState","opening","setOpening","eco","setEco","comment","setComment","annotated","setAnnotated","options","showOptions","useEffect","fenArray","split","fenAgain","position","json","find","undefined","turn","filter","openingsLength","moves","length","pgnLength","includes","chessBookWithPawn","onClick","chessGear","openBook","undo","map","arr","move","analysis","onMoveClick","colors","EvaluationBar","evaluationObj","playerColor","evaluation","color","mate","vh","setVh","better","setBetter","displayNum","setDisplayNum","bottomColor","setBottomColor","topColor","setTopColor","evalHeight","toFixed","style","backgroundColor","top","Math","abs","height","transition","CaptureArea","whitePieces","setWhitePieces","blackPieces","setBlackPieces","difference","setDifference","f","white","black","i","match","push","displayCaptures","captures","captureArray","p","b","n","r","q","P","B","N","R","Q","x","Modal","setAppElement","customStyles","content","left","right","bottom","marginRight","transform","PromotionPrompt","promotion","showModal","isOpen","textAlign","cursor","role","queen","width","rook","bishop","knight","useEffectWhen","effect","deps","whenDeps","whenRef","useRef","whenDepsChanged","current","every","w","nullDeps","stockfishPlayer","Worker","stockfishWhite","stockfishBlack","Chessboard","pendingMove","setPendingMove","lastMove","setLastMove","setEvaluation","setDepth","setShowModal","computerLevel","level","postMessage","console","log","onmessage","bestMove","data","from","to","handleMessage","currDepth","turnColor","game_over","setTimeout","onGameOver","alert","orientation","movable","dests","Map","SQUARES","forEach","s","ms","square","verbose","set","m","free","calcMovable","onMove","len","flags","indexOf","animation","duration","e","Dashboard","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","store","createStore","action","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1270432f.chunk.js","sourcesContent":["import Chess from 'chess.js';\r\n\r\nconst initialState = {\r\n    game: new Chess(),\r\n    fen: \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\",\r\n    pgn: \"\",\r\n    depth: 15,\r\n    computerOpponent: false,\r\n    difficulty: 1,\r\n    userColor: \"white\"\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\r\n    console.log(state)\r\n\r\n    switch (action.type) {\r\n\r\n        case 'UPDATE_GAME':\r\n            return {\r\n                ...state,\r\n                game: action.game,\r\n                fen: action.fen,\r\n                pgn: action.pgn\r\n            }\r\n        \r\n        case \"SET_STOCKFISH_DEPTH\":\r\n            return {\r\n                ...state,\r\n                depth: action.depth\r\n            }\r\n\r\n        case \"SET_OPPONENT\":\r\n            return {\r\n                ...state,\r\n                computerOpponent: action.payload\r\n            }\r\n\r\n        case \"SET_COMPUTER_DIFFICULTY\":\r\n            return {\r\n                ...state,\r\n                difficulty: action.payload\r\n            }\r\n\r\n        case \"SET_USER_COLOR\":\r\n            return {\r\n                ...state,\r\n                userColor: action.payload\r\n            }\r\n\r\n        default:        \r\n            return state\r\n    }\r\n  }","export default __webpack_public_path__ + \"static/media/lightning.b2dfab5c.svg\";","import \"./Header.css\"\r\nimport lightningBolt from \"../images/lightning.svg\";\r\n\r\nconst Header = () => {\r\n    return (\r\n        <div id=\"header\">\r\n            <div id=\"logo\">\r\n                <img src={lightningBolt} id=\"logo-image\" alt=\"lighting-bolt\" />\r\n                <span id=\"chess\">CHESS</span>\r\n                <span id=\"battery\">BATTERY</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/chess-logo.78040a62.svg\";","export default __webpack_public_path__ + \"static/media/open-book.2a9fb61b.svg\";","export default __webpack_public_path__ + \"static/media/chess-gear.61562b26.svg\";","import \"./Options.css\"\r\nimport { useDispatch } from \"react-redux\"\r\n\r\nconst Options = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const handleChange = (event) => {\r\n        let {name, value} = event.target;\r\n        if (value !== \"white\" && value !== \"black\") {value = JSON.parse(value)};\r\n        dispatch({type: name, payload: value});\r\n    }\r\n\r\n    return (\r\n        <div id=\"options\">\r\n            <form className=\"option\" id=\"player-color-option\">\r\n                <h3>Player Color</h3>\r\n                <div className=\"switch-field\">\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-one\" name=\"SET_USER_COLOR\" value=\"white\" defaultChecked/>\r\n                    <label htmlFor=\"radio-one\">White</label>\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-two\" name=\"SET_USER_COLOR\" value=\"black\" />\r\n                    <label htmlFor=\"radio-two\">Black</label>\r\n                </div>\r\n            </form>\r\n            <form className=\"option\" id=\"computer-player-option\">\r\n                <h3>Opponent</h3>\r\n                <div className=\"switch-field\">\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-three\" name=\"SET_OPPONENT\" value=\"false\" defaultChecked/>\r\n                    <label htmlFor=\"radio-three\">Human</label>\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-four\" name=\"SET_OPPONENT\" value=\"true\" />\r\n                    <label htmlFor=\"radio-four\">Computer</label>\r\n                </div>\r\n            </form>\r\n            <form className=\"option\" id=\"computer-player-level\">\r\n                <h3>Computer Level</h3>\r\n                <div className=\"switch-field\">\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-five\" name=\"SET_COMPUTER_DIFFICULTY\" value=\"1\" defaultChecked/>\r\n                    <label htmlFor=\"radio-five\">1</label>\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-six\" name=\"SET_COMPUTER_DIFFICULTY\" value=\"2\" />\r\n                    <label htmlFor=\"radio-six\">2</label>\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-seven\" name=\"SET_COMPUTER_DIFFICULTY\" value=\"3\" />\r\n                    <label htmlFor=\"radio-seven\">3</label>\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-eight\" name=\"SET_COMPUTER_DIFFICULTY\" value=\"4\" />\r\n                    <label htmlFor=\"radio-eight\">4</label>\r\n                    <input onChange={handleChange} type=\"radio\" id=\"radio-nine\" name=\"SET_COMPUTER_DIFFICULTY\" value=\"5\" />\r\n                    <label htmlFor=\"radio-nine\">5</label>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Options;","export default __webpack_public_path__ + \"static/media/strategy.135ddd78.svg\";","import { React, useState, useEffect } from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport parse from 'html-react-parser';\r\nimport json from \"../openings.json\"\r\nimport chessBookWithPawn from \"../images/chess-logo.svg\"\r\nimport openBook from \"../images/open-book.svg\"\r\nimport chessGear from \"../images/chess-gear.svg\"\r\nimport img from \"../images/strategy.svg\"\r\nimport Options from \"../Options/Options\"\r\n\r\nimport \"./InfoBox.css\"\r\n\r\nconst InfoBox = () => {\r\n\r\n    const chess = useSelector(state => state.game);\r\n    const pgn = useSelector(state => state.pgn);\r\n    const fen = useSelector(state => state.fen);\r\n    const [opening, setOpening] = useState()\r\n    const [eco, setEco] = useState()\r\n    const [comment, setComment] = useState('')\r\n    const [annotated, setAnnotated] = useState()\r\n    const [options, showOptions] = useState(false)\r\n    const dispatch = useDispatch()\r\n\r\n    const onMoveClick = (move) => {\r\n        chess.move(move)\r\n        dispatch({type: \"UPDATE_GAME\", game: chess, fen: chess.fen(), pgn: chess.pgn()})\r\n    }\r\n\r\n    useEffect(() => {\r\n        let fenArray = fen.split(' ')\r\n        let fenAgain = fenArray[0] + \" \" + fenArray[1] + \" \" + fenArray[2]\r\n        let position = json.find(opening => opening.fen === fenAgain)\r\n\r\n        if (position && position.name !== position) {\r\n            setOpening(position.name)\r\n            setEco(position.eco)\r\n        }\r\n\r\n        if (position && position.comment) {\r\n            setComment(position.comment)\r\n        } else if (position === undefined && comment !== \"\") {\r\n            setComment(\"\")\r\n        }\r\n    }, [fen, opening, eco, comment, annotated]);\r\n\r\n    useEffect(() => {\r\n        const turn = chess.turn() === \"w\" ? 2 : 1\r\n        setAnnotated(json.filter(opening => {\r\n            const openingsLength  = opening.moves.split(' ').length;\r\n            let pgnLength = pgn.split(' ').length\r\n\r\n            if (pgnLength === 1) {pgnLength = 0} // splitting an empty string by \" \" returns an empty array with a length of 1...\r\n\r\n            return opening.moves.includes(pgn)\r\n            && openingsLength - pgnLength === turn\r\n            && opening.comment\r\n        }))\r\n    }, [chess, pgn])\r\n    \r\n    const annotatedMoves = () => {\r\n        return annotated?.map(opening => {\r\n            const arr = opening.moves.split(' ')\r\n            const move = arr[arr.length - 1]\r\n            return <button \r\n                        key={opening.name} \r\n                        className={`annotated-move ${opening?.analysis || \"normal\"}`}\r\n                        onClick={() => onMoveClick(move)}\r\n                    >\r\n                        {move}\r\n                    </button>\r\n        })\r\n    }\r\n\r\n    const currentInfo = () => {\r\n        if (options) {\r\n            return (\r\n                <div>\r\n                    <Options />\r\n                </div>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                    {parse(comment)}\r\n                    <img id=\"commentary-background-image\" src={openBook} alt=\"open book\" />\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    const undoMove = () => {\r\n        chess.undo()\r\n        dispatch({type: \"UPDATE_GAME\", game: chess, fen: chess.fen(), pgn: chess.pgn()})\r\n    }\r\n\r\n    return (\r\n        <div id=\"infobox\">\r\n\r\n            <div id=\"position\">\r\n                <img src={chessBookWithPawn} alt=\"book with pawn on front\" id=\"book-image\"/>\r\n                <span id=\"opening\"> {eco} {opening} </span> \r\n                <br />\r\n                <button className={options ? \"ribbon active\" : \"ribbon\"} onClick={() => showOptions(!options)}>\r\n                    <img src={chessGear} alt=\"gear with chess piece in center\" id=\"gears\" />\r\n                </button>\r\n            </div>\r\n\r\n            <div id=\"commentary\">\r\n                {currentInfo()}\r\n            </div>\r\n\r\n            <div>\r\n                <button id=\"undo-button\" onClick={undoMove}>⟲</button>\r\n            </div>\r\n\r\n            <div id=\"continuations\">\r\n                <span id=\"continuations-title\">Annotated Continuations:</span> <span>good</span> <span>unadviced</span> <span>forced</span> <br />\r\n                {annotatedMoves()}\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InfoBox;\r\n","import { useState, useEffect } from \"react\"\r\nimport \"./EvaluationBar.css\"\r\n\r\nconst colors = [\"antiquewhite\", \"rgb(10,10,10,.85)\"]\r\n\r\nconst EvaluationBar = ({evaluationObj, playerColor}) => {\r\n\r\n    let {evaluation, color, mate} = evaluationObj\r\n\r\n    const [vh, setVh] = useState(1);\r\n    const [better, setBetter] = useState('w');\r\n    const [displayNum, setDisplayNum] = useState(0.2)\r\n    const [bottomColor, setBottomColor] = useState(\"antiquewhite\")\r\n    const [topColor, setTopColor] = useState(\"black\")\r\n\r\n    useEffect(() => {\r\n        if (playerColor === \"white\") {\r\n            setBottomColor(colors[0])\r\n            setTopColor(colors[1])\r\n        } else {\r\n            setBottomColor(colors[1])\r\n            setTopColor(colors[0])\r\n        }\r\n    }, [playerColor])\r\n\r\n    useEffect(() => {\r\n        //set eval bar height\r\n        let  evalHeight =  color === 'w' ? \r\n        50 - (evaluation  * 4) :\r\n        50 + (evaluation  * 4);\r\n\r\n        if (evaluation > 0) {\r\n            setBetter(color)\r\n        } else {\r\n            color === \"w\" ? setBetter(\"b\") : setBetter(\"w\")\r\n        };\r\n        \r\n        \r\n        //leave at least 2% if checkmate is not found\r\n        if (evalHeight > 100) {\r\n            evalHeight = 98\r\n        }\r\n        if (evalHeight < 0) {\r\n            evalHeight = 2\r\n        }\r\n\r\n        if (playerColor === \"black\") {\r\n            evalHeight = 100 - evalHeight\r\n        }\r\n\r\n        setVh(evalHeight)\r\n\r\n        setDisplayNum(evaluation?.toFixed(2))\r\n\r\n    }, [playerColor, color, evaluation]);\r\n\r\n    useEffect(() => {\r\n        if (mate !== 0) {\r\n        better === \"w\" ? setVh(100) : setVh(0)\r\n        }\r\n    }, [mate, better])\r\n\r\n    const displayEval = () => {\r\n        if (mate !== 0) {\r\n            return \"#\" + mate\r\n        } else {\r\n            const symbol = better === \"w\" ? \"+\" : \"-\"\r\n            return symbol + Math.abs(displayNum).toFixed(1)\r\n        }\r\n    }\r\n\r\n    const evalStyle = () => {\r\n        if (playerColor === \"white\") {\r\n            return better === \"w\" ?\r\n                {color: \"black\", top: '94%'} :\r\n                {color: \"white\", top: '1%'}\r\n        } else {\r\n            return better=== \"b\" ?\r\n            {color: \"white\", top: '94%'} :\r\n            {color: \"black\", top: '1%'}\r\n        }\r\n    }\r\n        \r\n    return (\r\n        <div id=\"evaluation-bar-holder\" style={{backgroundColor: bottomColor}}>\r\n            <p id=\"eval\" style={evalStyle()}>{displayEval()}</p>\r\n            <div id=\"evaluation-bar\" style={{height: `${vh}%`, transition: 'height 2s', backgroundColor: topColor}} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EvaluationBar;","export default __webpack_public_path__ + \"static/media/wP.9b7bf047.svg\";","export default __webpack_public_path__ + \"static/media/wB.100481bc.svg\";","export default __webpack_public_path__ + \"static/media/wN.ae9b1c6d.svg\";","export default __webpack_public_path__ + \"static/media/wR.ad69d2b3.svg\";","export default __webpack_public_path__ + \"static/media/wQ.c3e0858a.svg\";","export default __webpack_public_path__ + \"static/media/bP.3e6e5f16.svg\";","export default __webpack_public_path__ + \"static/media/bB.9ce7c272.svg\";","export default __webpack_public_path__ + \"static/media/bN.f02273ec.svg\";","export default __webpack_public_path__ + \"static/media/bR.34580a73.svg\";","export default __webpack_public_path__ + \"static/media/bQ.dc56bc67.svg\";","import { useState, useEffect } from \"react\"\r\nimport \"./CaptureArea.css\"\r\n\r\nimport p from \"../images/pieces/wP.svg\"\r\nimport b from \"../images/pieces/wB.svg\"\r\nimport n from \"../images/pieces/wN.svg\"\r\nimport r from \"../images/pieces/wR.svg\"\r\nimport q from \"../images/pieces/wQ.svg\"\r\n\r\nimport P from \"../images/pieces/bP.svg\"\r\nimport B from \"../images/pieces/bB.svg\"\r\nimport N from \"../images/pieces/bN.svg\"\r\nimport R from \"../images/pieces/bR.svg\"\r\nimport Q from \"../images/pieces/bQ.svg\"\r\n\r\nconst CaptureArea = ({fen}) => {\r\n\r\n    const [whitePieces, setWhitePieces] = useState([]);\r\n    const [blackPieces, setBlackPieces] = useState([]);\r\n    const [difference, setDifference] = useState(0)\r\n\r\n    useEffect(() => {\r\n        const f = fen.split(' ')[0]\r\n        const white = [];\r\n        const black = [];\r\n        let difference = 0;\r\n        for(let i = 0; i < 8 - [...f.match(/p/g) || [] ].length; i++) {\r\n            white.push(\"p\")\r\n            difference++\r\n        }\r\n        for(let i = 0; i < 2 - [...f.match(/b/g) || [] ].length; i++) {\r\n            white.push(\"b\")\r\n            difference += 3\r\n        }\r\n        for(let i = 0; i < 2 - [...f.match(/n/g) || [] ].length; i++) {\r\n            white.push(\"n\")\r\n            difference += 3\r\n        }\r\n        for(let i = 0; i < 2 - [...f.match(/r/g) || [] ].length; i++) {\r\n            white.push(\"r\")\r\n            difference += 5\r\n        }\r\n        if (!f.match(/q/g)) {\r\n            white.push(\"q\")\r\n            difference += 9\r\n        }\r\n\r\n        for(let i = 0; i < 8 - [...f.match(/P/g) || [] ].length; i++) {\r\n            black.push(\"P\")\r\n            difference--\r\n        }\r\n        for(let i = 0; i < 2 - [...f.match(/B/g) || [] ].length; i++) {\r\n            black.push(\"B\")\r\n            difference -= 3\r\n        }\r\n        for(let i = 0; i < 2 - [...f.match(/N/g) || [] ].length; i++) {\r\n            black.push(\"N\")\r\n            difference -= 3\r\n        }\r\n        for(let i = 0; i < 2 - [...f.match(/R/g) || [] ].length; i++) {\r\n            black.push(\"R\")\r\n            difference -= 5\r\n        }\r\n        if (!f.match(/Q/g)) {\r\n            black.push(\"Q\")\r\n            difference -= 9\r\n        }\r\n        setWhitePieces(black)\r\n        setBlackPieces(white)\r\n        setDifference(difference)\r\n    }, [fen])\r\n\r\n    const displayCaptures = (captures, color) => {\r\n        let captureArray = [];\r\n        if (color === \"w\") {\r\n            captureArray = [p, b, n, r, q]\r\n        } else {\r\n            captureArray = [P, B, N, R, Q]\r\n        }\r\n        return (\r\n            captures.map((x, i) => {\r\n                switch(x) {\r\n                    case \"p\":\r\n                    case \"P\":\r\n                        return <img src={captureArray[0]} key={i} alt=\"\" className=\"captured-piece captured-pawn\" />\r\n                    case \"b\":\r\n                    case \"B\":\r\n                        return <img src={captureArray[1]} key={i} alt=\"\" className=\"captured-piece captured-bishop\" />\r\n                    case \"n\":\r\n                    case \"N\":\r\n                        return <img src={captureArray[2]} key={i} alt=\"\" className=\"captured-piece captured-knight\" />\r\n                    case \"r\":\r\n                    case \"R\":\r\n                        return <img src={captureArray[3]} key={i} alt=\"\" className=\"captured-piece captured-rook\" />\r\n                    case \"q\":\r\n                    case \"Q\":\r\n                        return <img src={captureArray[4]} key={i} alt=\"\" className=\"captured-piece captured-queen\" />\r\n                    default:\r\n                        return \"Error\"  \r\n                }\r\n            })\r\n        )\r\n    }\r\n        \r\n    return (\r\n        <div id=\"capture-area-wrapper\">\r\n            <div className=\"capture-area\" id=\"capture-area-white\">\r\n                {displayCaptures(whitePieces, \"w\")}\r\n                {difference < 0 ? \"+\" + Math.abs(difference): null}\r\n            </div>\r\n            <div className=\"capture-area\" id=\"capture-area-black\">\r\n                {displayCaptures(blackPieces, \"b\")}\r\n                {difference > 0 ? \"+\" + Math.abs(difference): null}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CaptureArea;","import Modal from \"react-modal\"\r\nimport rook from \"../images/pieces/wR.svg\"\r\nimport queen from \"../images/pieces/wQ.svg\"\r\nimport bishop from \"../images/pieces/wB.svg\"\r\nimport knight from \"../images/pieces/wN.svg\"\r\n\r\nimport \"./PromotionPrompt.css\"\r\n\r\nModal.setAppElement('#root')\r\n\r\nconst customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-50%',\r\n      transform             : 'translate(-50%, -50%)'\r\n    }\r\n  };\r\n\r\nconst PromotionPrompt = ({promotion, showModal}) => {\r\n\r\n    // const [showModal, setShowModal] = useState(false)\r\n\r\n    return (\r\n        <div id=\"promotion-prompt\">\r\n        <Modal isOpen={showModal} style={customStyles}>\r\n            <div style={{ textAlign: \"center\", cursor: \"pointer\" }}>\r\n                <span role=\"presentation\" onClick={() => promotion(\"q\")}>\r\n                    <img src={queen} alt=\"\" style={{ width: 50 }} />\r\n                </span>\r\n                <span role=\"presentation\" onClick={() => promotion(\"r\")}>\r\n                    <img src={rook} alt=\"\" style={{ width: 50 }} />\r\n                </span>\r\n                <span role=\"presentation\" onClick={() => promotion(\"b\")}>\r\n                    <img src={bishop} alt=\"\" style={{ width: 50 }} />\r\n                </span>\r\n                <span role=\"presentation\" onClick={() => promotion(\"n\")}>\r\n                    <img src={knight} alt=\"\" style={{ width: 50 }} />\r\n                </span>\r\n            </div>\r\n        </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PromotionPrompt;","import { useEffect, useRef } from \"react\"\r\n\r\nexport const useEffectWhen = (effect, deps, whenDeps) => {\r\n  const whenRef = useRef(whenDeps || []);\r\n  const initial = whenRef.current === whenDeps;\r\n  const whenDepsChanged = initial || !whenRef.current.every((w, i) => w === whenDeps[i]);\r\n  whenRef.current = whenDeps;\r\n  const nullDeps = deps.map(() => null);\r\n\r\n  /* eslint-disable-next-line */\r\n  return useEffect(\r\n    whenDepsChanged ? effect : () => {},\r\n    whenDepsChanged ? deps : nullDeps\r\n  );\r\n}","import React, {useState} from 'react';\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport Chessground from 'react-chessground'\r\nimport EvaluationBar from '../EvaluationBar/EvaluationBar';\r\nimport CaptureArea from \"../CaptureArea/CaptureArea\"\r\nimport PromotionPrompt from \"../PromotionPrompt/PromotionPrompt\"\r\nimport { useEffectWhen } from '../helpers'\r\n\r\nimport 'react-chessground/dist/styles/chessground.css'\r\nimport \"./chessboard.css\"\r\n\r\nconst stockfishPlayer = new Worker('/stockfish.js')\r\nconst stockfishWhite = new Worker('/stockfish.js')\r\nconst stockfishBlack = new Worker('/stockfish.js')\r\n\r\nconst Chessboard = () => {\r\n\r\n  const [pendingMove, setPendingMove] = useState()\r\n  const [lastMove, setLastMove] = useState()\r\n  const [evaluation, setEvaluation] = useState({evaluation: 0.2, color: \"w\", mate: 0})\r\n  const [depth, setDepth] = useState(0)\r\n  const [showModal, setShowModal] = useState(false)\r\n\r\n  const computerOpponent = useSelector(state => state.computerOpponent)\r\n  const playerColor = useSelector(state => state.userColor)\r\n  const chess = useSelector(state => state.game)\r\n  const fen = useSelector(state => state.fen)\r\n  const computerLevel = useSelector(state => state.difficulty)\r\n  const dispatch = useDispatch()\r\n\r\n  const onMove = (from, to) => {\r\n    const moves = chess.moves({ verbose: true })\r\n\r\n    //check if move is pawn promotion\r\n    for (let i = 0, len = moves.length; i < len; i++) { /* eslint-disable-line */\r\n      if (moves[i].flags.indexOf(\"p\") !== -1 && moves[i].from === from) {\r\n        setPendingMove([from, to])\r\n        setShowModal(true)\r\n        return\r\n      }\r\n    }\r\n\r\n    move(from, to)\r\n  }\r\n\r\n  useEffectWhen(() => {\r\n    let level = computerLevel === 1 ? 0 : (computerLevel - 1) * 5\r\n    stockfishPlayer.postMessage(`setoption name Skill Level value ${level}`)\r\n    console.log(level)\r\n  }, [computerLevel])\r\n\r\n  const stockfishMove = () => {\r\n    if (showModal === true) setShowModal(false);\r\n    stockfishPlayer.postMessage(`position fen ${chess.fen()}`)\r\n    stockfishPlayer.postMessage('go depth 15')\r\n  }\r\n\r\n  const stockfishAnalyze = () => {\r\n    if (chess.turn() === \"w\") {\r\n      stockfishBlack.postMessage('stop')\r\n      stockfishWhite.postMessage(`position fen ${chess.fen()}`)\r\n      stockfishWhite.postMessage('go depth 23')\r\n    } else {\r\n      stockfishWhite.postMessage('stop')\r\n      stockfishBlack.postMessage(`position fen ${chess.fen()}`)\r\n      stockfishBlack.postMessage('go depth 23')\r\n    }\r\n  }\r\n\r\n  stockfishPlayer.onmessage = (event) => { \r\n    let bestMove = event.data.match(/^bestmove ([a-h][1-8])([a-h][1-8])([qrbn])?/);\r\n\r\n    if (bestMove) {\r\n      move(bestMove[1], bestMove[2]);\r\n    }\r\n  }\r\n\r\n  const move = (from, to) => {\r\n    chess.move({from, to});\r\n    dispatch({type: \"UPDATE_GAME\", game: chess, fen: chess.fen(), pgn: chess.pgn()})\r\n    setLastMove([from, to]);\r\n  }\r\n\r\n  useEffectWhen(() => {\r\n    stockfishAnalyze()\r\n  }, [fen])\r\n\r\n  stockfishWhite.onmessage = (event) => {\r\n   handleMessage(event, \"w\")\r\n  }\r\n\r\n  stockfishBlack.onmessage = (event) => {\r\n   handleMessage(event, \"b\")\r\n  }\r\n\r\n  const handleMessage = (event, color) => {\r\n    let evaluation = event.data.match(/(?<=cp )(-?\\d*)/);\r\n    let mate = event.data.match(/(?<=mate )(-?\\d*)/);\r\n    let currDepth = event.data.match(/(?<=depth )(-?\\d*)/);\r\n    if (currDepth !== null && currDepth[0] !== depth ) {\r\n      setDepth(currDepth[0])\r\n    }\r\n    if (evaluation != null && chess.turn() === color) {\r\n      setEvaluation(\r\n        {evaluation: evaluation[1] / 100, \r\n          color: color,\r\n          mate: 0\r\n        })\r\n    }\r\n    if (mate) {\r\n      setEvaluation({...evaluation, mate: mate[0]})\r\n    }\r\n  }\r\n\r\n  const promotion = e => {\r\n    const from = pendingMove[0]\r\n    const to = pendingMove[1]\r\n    chess.move({ from, to, promotion: e })\r\n    setLastMove([from, to])\r\n    setShowModal(false)\r\n  }\r\n\r\n  const turnColor = () => {\r\n    return chess.turn() === \"w\" ? \"white\" : \"black\"\r\n  }\r\n\r\n  const calcMovable = () => {\r\n    const dests = new Map()\r\n    chess.SQUARES.forEach(s => {\r\n      const ms = chess.moves({ square: s, verbose: true })\r\n      if (ms.length) dests.set(s, ms.map(m => m.to))\r\n    })\r\n    return {\r\n      free: false,\r\n      dests,\r\n      color: turnColor()\r\n    }\r\n  }\r\n\r\nuseEffectWhen (() => {\r\n  if (chess.game_over()) {\r\n    setTimeout(onGameOver, 500)\r\n  }\r\n}, [chess.game_over()])\r\n\r\nconst onGameOver = () => {\r\n  alert('Game over, bro.')\r\n}\r\n\r\nuseEffectWhen(() => {\r\n  if (turnColor() !== playerColor && computerOpponent) {\r\n    stockfishMove()\r\n  }\r\n}, [lastMove, computerOpponent, playerColor])\r\n\r\n  return (\r\n      <div id=\"chessboard\">\r\n        <EvaluationBar playerColor={playerColor} evaluationObj={evaluation}/>\r\n\r\n        <Chessground\r\n          orientation={playerColor}\r\n          turnColor={turnColor()}\r\n          movable={calcMovable()}\r\n          lastMove={lastMove}\r\n          fen={chess.fen()}\r\n          onMove={onMove}\r\n          animation={{duration: 300}}\r\n        />\r\n\r\n        <div id=\"depth\">\r\n          <span id=\"depth-title\">DEPTH</span> \r\n          <br />\r\n          <span id=\"depth-num\">{depth}</span>\r\n        </div>\r\n\r\n        <CaptureArea fen={chess.fen()}/>\r\n\r\n        <PromotionPrompt promotion={promotion} showModal={showModal}/>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Chessboard","import React from 'react';\r\nimport { useSelector } from \"react-redux\"\r\nimport InfoBox from \"../InfoBox/InfoBox\"\r\nimport Chessboard from \"../Chessboard/ChessBoard\"\r\n\r\nimport 'react-chessground/dist/styles/chessground.css'\r\nimport \"./Dashboard.css\"\r\n\r\nconst Dashboard = () => {\r\n\r\n  const chess = useSelector(state => state.game)\r\n\r\n  return (\r\n    <div id =\"dashboard\">\r\n\r\n    <Chessboard />\r\n\r\n    <InfoBox \r\n      chess={chess}\r\n      fen={chess.fen()} \r\n      pgn={chess.pgn()}\r\n    />\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard","import './App.css';\r\nimport Header from \"../Header/Header\"\r\nimport Dashboard from '../Dashboard/Dashboard';\r\n\r\nfunction App() {\r\n  \r\n  return (\r\n    <div className=\"App\">\r\n      <Header />\r\n      <Dashboard />\r\n    </div>\r\n  );\r\n}\r\n  \r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reducer from \"./reducer\"\r\nimport './index.css';\r\nimport App from './App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\n\r\nconst store = createStore(reducer)\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}